<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>ğŸ§  Min Utveckling â€“ Linux Portfolio</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="icon" href="../assets/images/penguin.png" type="image/png">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
async function loadCompetenceData() {
  const response = await fetch('../assets/data/ai_competence.json');
  const data = await response.json();

  const labels = Object.keys(data);
  const values = Object.values(data);

  new Chart(document.getElementById('skillChart'), {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: 'KompetensnivÃ¥',
        data: values,
        backgroundColor: '#42a5f5'
      }]
    },
    options: {
      scales: {
        y: { beginAtZero: true, max: 10 },
        x: { ticks: { color: '#ccc' } }
      },
      plugins: { legend: { display: false } }
    }
  });
}

document.addEventListener('DOMContentLoaded', loadCompetenceData);
</script>

</head>

<body class="dark-mode">
<script src="../assets/js/auth_check.js" defer></script>

  <header class="stat-section">
    <h1>ğŸ§  AI-utvÃ¤rdering â€“ Min Utveckling inom Linux</h1>
    <p>Visualisering och bedÃ¶mning av min kompetensnivÃ¥ baserat pÃ¥ loggdata och praktiskt arbete i Linux-miljÃ¶.</p>
  </header>

  <!-- === SEKTION 1: Kompetensprofil === -->
  <section class="stat-section">
    <h2>ğŸ“Š Kompetensprofil â€“ Stapeldiagram</h2>
    <canvas id="skillChart" width="700" height="500" style="max-width:800px;margin:auto;display:block;"></canvas>

    <!-- ğŸ“ˆ Trend Ã¶ver tid -->
    <h3 style="text-align:center;margin-top:40px;">ğŸ“ˆ Utveckling Ã¶ver tid</h3>
    <canvas id="trendChart" width="700" height="300" style="max-width:800px;margin:auto;display:block;"></canvas>
  </section>

  <!-- === SEKTION 2: AI-BEDÃ–MNING === -->
  <section class="stat-section">
    <h2>ğŸ§  AI-BedÃ¶mning</h2>
    <blockquote id="aiComment">
      Laddar AI-bedÃ¶mning...
    </blockquote>
  </section>

  <!-- === SEKTION 3: KompetensnivÃ¥er === -->
  <section class="stat-section">
    <h2>ğŸ§ª KompetensnivÃ¥er baserat pÃ¥ loggdata</h2>
    <table class="data-table">
      <tr><th>OmrÃ¥de</th><th>NivÃ¥</th><th>BedÃ¶mning</th></tr>
      <tr><td>Shell Scripting</td><td>7</td><td>Avancerad</td></tr>
      <tr><td>System Automation</td><td>6</td><td>Medel</td></tr>
      <tr><td>Cron Jobs</td><td>5</td><td>GrundlÃ¤ggande</td></tr>
      <tr><td>File Management</td><td>8</td><td>Avancerad</td></tr>
      <tr><td>Documentation</td><td>7</td><td>Avancerad</td></tr>
      <tr><td>Backup Strategy</td><td>6</td><td>Medel</td></tr>
      <tr><td>Monitoring & Logs</td><td>5</td><td>GrundlÃ¤ggande</td></tr>
      <tr><td>Web Development</td><td>4</td><td>GrundlÃ¤ggande</td></tr>
    </table>

    <!-- ğŸ“˜ FÃ¶rklaring av kompetensnivÃ¥er -->
    <h3 style="margin-top:30px;">ğŸ“˜ FÃ¶rklaring av KompetensnivÃ¥er</h3>
    <table class="data-table">
      <tr><th>NivÃ¥</th><th>BenÃ¤mning</th><th>Beskrivning</th></tr>
      <tr><td>0â€“2</td><td>NybÃ¶rjare</td><td>GrundlÃ¤ggande fÃ¶rstÃ¥else, behÃ¶ver handledning.</td></tr>
      <tr><td>3â€“4</td><td>GrundlÃ¤ggande</td><td>Kan utfÃ¶ra enklare uppgifter sjÃ¤lvstÃ¤ndigt.</td></tr>
      <tr><td>5â€“6</td><td>Medel</td><td>Arbetar sjÃ¤lvstÃ¤ndigt med vanliga uppgifter.</td></tr>
      <tr><td>7â€“8</td><td>Avancerad</td><td>Skapar egna lÃ¶sningar och hanterar komplexa problem.</td></tr>
      <tr><td>9â€“10</td><td>Expert</td><td>Designar och fÃ¶rbÃ¤ttrar systemlÃ¶sningar.</td></tr>
    </table>
  </section>

  <!-- === EXPORT & FOOTER === -->
  <section class="export-buttons" style="text-align:center;">
    <button onclick="window.print()">ğŸ–¨ï¸ Skriv ut</button>
    <a href="../assets/pdf/min_utveckling.pdf" download>ğŸ“¥ Ladda ner PDF</a>
    <a href="../index.html">â¬…ï¸ Tillbaka till dashboard</a>
  </section>

  <!-- ğŸ”„ Senast AI-analysen kÃ¶rdes -->
  <p id="lastRun" style="text-align:center;color:#999;font-size:0.9em;"></p>
  <script>
    fetch('../logs/ai_update.log')
      .then(r => r.text())
      .then(t => {
        const lines = t.trim().split('\n');
        const lastLine = lines[lines.length - 1];
        document.getElementById('lastRun').textContent =
          "ğŸ”„ Senast AI-analysen kÃ¶rdes: " + new Date().toLocaleString("sv-SE");
      })
      .catch(() => {});
  </script>

  <!-- === FOOTER === -->
  <footer id="footer-info" style="margin-top:50px;text-align:center;padding:20px 0;color:#aaa;">
    <p>
      Â© 2025 Kate Sofia Petersen |
      <a href="system_oversikt_final.html" style="color:#90caf9;text-decoration:none;">ğŸ§­ SystemÃ¶versikt</a><br>
      <small id="lastUpdated">Laddar senast uppdaterad tid...</small>
    </p>
  </footer>

  <script>
    // Stapeldiagram Ã¶ver kompetensnivÃ¥er
    const ctx = document.getElementById('skillChart');
    if (ctx) {
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: [
            'Shell Scripting','System Automation','Cron Jobs',
            'File Management','Documentation','Backup Strategy',
            'Monitoring & Logs','Web Development'
          ],
          datasets: [{
            label: 'KompetensnivÃ¥',
            data: [7,6,5,8,7,6,5,4],
            backgroundColor: '#42a5f5'
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              max: 10,
              ticks: { color: '#ccc' },
              title: { display: true, text: 'NivÃ¥', color: '#ccc' }
            },
            x: { ticks: { color: '#ccc' } }
          },
          plugins: {
            legend: { display: false },
            title: {
              display: true,
              text: 'KompetensnivÃ¥ per omrÃ¥de',
              color: '#ccc'
            }
          }
        }
      });
    }

// === Trendgraf Ã¶ver tid (vÃ¤nster till hÃ¶ger) ===
const trendCtx = document.getElementById('trendChart');
if (trendCtx) {
  fetch('../assets/data/ai_competence_history.csv')
    .then(r => r.text())
    .then(csv => {
      const rows = csv.trim().split('\n').slice(1); // hoppa Ã¶ver rubrik
      const labels = [];
      const avgLevels = [];

      rows.forEach(row => {
        const parts = row.split(',');
        const date = parts[0];
        const avg = parts.slice(1).map(Number).reduce((a,b)=>a+b,0) / (parts.length-1);
        labels.push(date);
        avgLevels.push(avg);
      });

      new Chart(trendCtx, {
        type: 'line', // linjediagram fÃ¶r tydlig tidslinje
        data: {
          labels: labels, // datum pÃ¥ X-axeln
          datasets: [{
            label: 'Genomsnittlig kompetensnivÃ¥',
            data: avgLevels,
            borderColor: '#42a5f5',
            backgroundColor: 'rgba(66,165,245,0.25)',
            pointBackgroundColor: '#90caf9',
            pointRadius: 5,
            fill: true,
            tension: 0.35 // mjuk kurva
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              max: 10,
              ticks: { color: '#ccc' },
              title: { display: true, text: 'KompetensnivÃ¥', color: '#ccc' }
            },
            x: {
              ticks: { color: '#ccc', autoSkip: true, maxTicksLimit: 8 },
              title: { display: true, text: 'Datum', color: '#ccc' }
            }
          },
          plugins: {
            legend: { labels: { color: '#ccc' } },
            title: {
              display: true,
              text: 'Utveckling Ã¶ver tid',
              color: '#ccc'
            }
          }
        }
      });
    })
    .catch(() => {});
}
    // Footer "senast uppdaterad"
    document.getElementById("lastUpdated").textContent =
      "Senast uppdaterad: " + new Date(document.lastModified).toLocaleString("sv-SE");
  </script>

<script>
async function loadAIComment() {
  try {
    const res = await fetch('../assets/data/ai_comment.txt', { cache: "no-store" });
    if (!res.ok) throw new Error("Filen hittades inte");
    const text = await res.text();
    const block = document.getElementById('aiComment');
    block.textContent = text.trim() || "Ingen AI-bedÃ¶mning tillgÃ¤nglig just nu.";
  } catch (err) {
    document.getElementById('aiComment').textContent =
      "âš ï¸ Kunde inte lÃ¤sa AI-bedÃ¶mning (" + err.message + ")";
  }
}
document.addEventListener('DOMContentLoaded', loadAIComment);
</script>

</body>
</html>
